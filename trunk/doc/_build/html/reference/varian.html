<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>nmrglue.varian &mdash; nmrglue v1.0 documentation</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="nmrglue v1.0 documentation" href="../index.html" />
    <link rel="up" title="Reference Guide" href="index.html" />
    <link rel="next" title="nmrglue.proc_base" href="proc_base.html" />
    <link rel="prev" title="nmrglue.sparky" href="sparky.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="proc_base.html" title="nmrglue.proc_base"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="sparky.html" title="nmrglue.sparky"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">nmrglue v1.0 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Reference Guide</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="#">nmrglue.varian</a><ul>
<li><a class="reference external" href="#high-level-functions">High-Level Functions</a></li>
<li><a class="reference external" href="#low-level-functions">Low-Level Functions</a></li>
<li><a class="reference external" href="#low-level-classes">Low-Level Classes</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="sparky.html"
                                  title="previous chapter">nmrglue.sparky</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="proc_base.html"
                                  title="next chapter">nmrglue.proc_base</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/reference/varian.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-nmrglue.fileio.varian">
<h1>nmrglue.varian<a class="headerlink" href="#module-nmrglue.fileio.varian" title="Permalink to this headline">¶</a></h1>
<p>Functions for reading and writing varian binary (fid) files and varian 
parameter (procpar) files.</p>
<p>Both varian file formats are well documented in:</p>
<ul class="simple">
<li>Varain MR News 2005-04-18 Importing Binary VnmrJ / VNMR FIDs into Third Party Software and VnmrJ / VNMR FID Data Format</li>
<li>VnmrJ User Programming - Chapter 5: Parameters and Data</li>
</ul>
<p>These are available (as of 08/2009) online from 
<a class="reference external" href="http://varianinc.com">Varian</a>.</p>
<p>This modules is imported as nmrglue.varian and can be called as such.</p>
<div class="section" id="high-level-functions">
<h2>High-Level Functions<a class="headerlink" href="#high-level-functions" title="Permalink to this headline">¶</a></h2>
<p>These are the functions the majority of users will use from the varian module.</p>
<dl class="function">
<dt id="nmrglue.fileio.varian.read">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">read</tt><big>(</big><em>dir='.'</em>, <em>fid_file='fid'</em>, <em>procpar_file='procpar'</em>, <em>read_blockhead=False</em>, <em>(lenZ</em>, <em>lenY)=(None</em>, <em>None)</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read Varian files in a directory</p>
<p>Parameters:</p>
<ul class="simple">
<li>dir               Directory holding Varian data.</li>
<li>fid_file          Name of fid_file in directory</li>
<li>procpar_file      Name of procpar file in directory</li>
<li>read_blockhead    Set True to head blockheader(s)</li>
<li>lenZ,lenY         Shape of Z and Y dimension required for 3D data</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.read_lowmem">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">read_lowmem</tt><big>(</big><em>dir='.'</em>, <em>fid_file='fid'</em>, <em>procpar_file='procpar'</em>, <em>(lenZ</em>, <em>lenY)=(None</em>, <em>None)</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.read_lowmem" title="Permalink to this definition">¶</a></dt>
<dd><p>Read Varian files in a directory using minimal memory</p>
<p>Parameters:</p>
<ul class="simple">
<li>dir               Directory holding Varian data.</li>
<li>fid_file          Name of fid_file in directory</li>
<li>procpar_file      Name of procpar file in directory</li>
<li>lenZ,lenY         Shape of Z and Y dimension required for 3D data</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.read_fid">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">read_fid</tt><big>(</big><em>filename</em>, <em>read_blockhead=False</em>, <em>(lenZ</em>, <em>lenY)=(None</em>, <em>None)</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.read_fid" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a varian binary (fid) file returning a dic,data pair.</p>
<p>When read_blockhead is True will read blockheader(s).</p>
<p>For 3D data sets the length of the two indirect dimensions must be provided
as lenZ and lenY.  If not provided the data set is open as if it was a 2D
data set.  read_blockhead is ignored in 3D data sets.</p>
<p>The data dtype will be complex64 or complex128 so that there is no loss of 
precision in the conversions from int16/int32.</p>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.read_fid_ntraces">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">read_fid_ntraces</tt><big>(</big><em>filename</em>, <em>read_blockhead=False</em>, <em>(lenZ</em>, <em>lenY)=(None</em>, <em>None)</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.read_fid_ntraces" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a varian binary (fid) file which may have multiple traces per block.  
Returns dic,data pair.</p>
<p>When read_blockhead is True will read blockheader(s).</p>
<p>For 3D data sets the length of the two indirect dimensions must be provided
as lenZ and lenY.  If not provided the data set is open as if it was a 2D
data set.</p>
<p>The data dtype will be complex64 or complex128 so that there is no loss of 
precision in the conversions from int16/int32.</p>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.read_fid_lowmem">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">read_fid_lowmem</tt><big>(</big><em>filename</em>, <em>(lenZ</em>, <em>lenY)=(None</em>, <em>None)</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.read_fid_lowmem" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a varian binary (fid) file with mimimal memory usage returning a 
dic,data pair</p>
<p>data will be an fid_2d of fid_3d object which can be sliced and transposed
like a numpy array.</p>
<p>For 3D data sets the length of the two indirect dimensions must be provided
as lenZ and lenY.  If not provided the data set is open as if it was a 2D
data set.</p>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.read_fid_lowmem_2D">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">read_fid_lowmem_2D</tt><big>(</big><em>filename</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.read_fid_lowmem_2D" title="Permalink to this definition">¶</a></dt>
<dd>Read a varian binary (fid) file as a 2D array with mimimal memory usage.</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.read_fid_lowmem_3D">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">read_fid_lowmem_3D</tt><big>(</big><em>filename</em>, <em>(lenZ</em>, <em>lenY)</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.read_fid_lowmem_3D" title="Permalink to this definition">¶</a></dt>
<dd>Read a varian fid file as a 3D array with mimimal memory usage.</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.write">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">write</tt><big>(</big><em>dir</em>, <em>dic</em>, <em>data</em>, <em>fid_file='fid'</em>, <em>procpar_file='procpar'</em>, <em>repack=False</em>, <em>overwrite=False</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write Varian files to a directory</p>
<p>Parameters:</p>
<ul class="simple">
<li>dir               Directory to write to.</li>
<li>data              Array of spectral data to write.</li>
<li>fid_file          Name of fid file to write to.</li>
<li>procpar_file      Name of procpar file to write to.</li>
<li>repack            True/False to repack file and block headers.</li>
<li>overwrite         True/False to overwrite existing file.</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.write_fid">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">write_fid</tt><big>(</big><em>filename</em>, <em>dic</em>, <em>data</em>, <em>repack=False</em>, <em>overwrite=False</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.write_fid" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a varian binary (fid) file</p>
<p>Parameters:</p>
<ul class="simple">
<li>filename  name of file to write to</li>
<li>dic       varian dictionary</li>
<li>data      data to write</li>
<li>overwrite True/False to overwrite existing file</li>
<li>repack    True/False to repack file and block headers</li>
</ul>
<p>When present dic[&#8216;blockheader&#8217;] will be used for blockheaders.  When 
absent a standard blockheader will be used.</p>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.write_fid_1D">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">write_fid_1D</tt><big>(</big><em>filename</em>, <em>dic</em>, <em>data</em>, <em>repack=False</em>, <em>overwrite=False</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.write_fid_1D" title="Permalink to this definition">¶</a></dt>
<dd>Write a 1D varian binary (fid) file</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.write_fid_2D">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">write_fid_2D</tt><big>(</big><em>filename</em>, <em>dic</em>, <em>data</em>, <em>repack=False</em>, <em>overwrite=False</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.write_fid_2D" title="Permalink to this definition">¶</a></dt>
<dd>Write a 2D varian binary (fid) file</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.write_fid_3D">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">write_fid_3D</tt><big>(</big><em>filename</em>, <em>dic</em>, <em>data</em>, <em>repack=False</em>, <em>overwrite=False</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.write_fid_3D" title="Permalink to this definition">¶</a></dt>
<dd>Write a 3D varian binary (fid) file</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.read_procpar">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">read_procpar</tt><big>(</big><em>filename</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.read_procpar" title="Permalink to this definition">¶</a></dt>
<dd>Read a procpar file returning a python dictionary</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.write_procpar">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">write_procpar</tt><big>(</big><em>filename</em>, <em>dic</em>, <em>overwrite=False</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.write_procpar" title="Permalink to this definition">¶</a></dt>
<dd>Write a varian procpar file from python dictionary</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.guess_udic">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">guess_udic</tt><big>(</big><em>dic</em>, <em>data</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.guess_udic" title="Permalink to this definition">¶</a></dt>
<dd>Guess parameter of universal dictionary from dic,data pair</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.create_dic">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">create_dic</tt><big>(</big><em>udic</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.create_dic" title="Permalink to this definition">¶</a></dt>
<dd>Create a varian dictionary from a universal dictionary</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.sign_adj_2Ddata">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">sign_adj_2Ddata</tt><big>(</big><em>data</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.sign_adj_2Ddata" title="Permalink to this definition">¶</a></dt>
<dd><p>Sign adjust 2D data</p>
<p>Use this function to match NMRPipe data generated from var2pipe</p>
<p>Negate imag part of even fids, real part of odd fids</p>
</dd></dl>

</div>
<div class="section" id="low-level-functions">
<h2>Low-Level Functions<a class="headerlink" href="#low-level-functions" title="Permalink to this headline">¶</a></h2>
<p>These functions are typically not used directly by users.  They are called by
high level functions.  Developers and user who want fine control over varian
files will be interested in these functions.</p>
<dl class="function">
<dt id="nmrglue.fileio.varian.create_data">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">create_data</tt><big>(</big><em>data</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.create_data" title="Permalink to this definition">¶</a></dt>
<dd>Create a varian data array (recast into complex64 array)</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.get_parameter">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">get_parameter</tt><big>(</big><em>file</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.get_parameter" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a procpar parameter from a file object</p>
<p>Returns a dictionary with the attributes of the parameter</p>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.find_cdtype">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">find_cdtype</tt><big>(</big><em>dic</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.find_cdtype" title="Permalink to this definition">¶</a></dt>
<dd>Find the data complex dtype from a dictionary</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.find_dtype">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">find_dtype</tt><big>(</big><em>dic</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.find_dtype" title="Permalink to this definition">¶</a></dt>
<dd>Find the data dtype from a dictionary</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.uninterleave_data">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">uninterleave_data</tt><big>(</big><em>data_in</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.uninterleave_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Unpack interleaved real,imag data</p>
<table border="1" class="docutils">
<colgroup>
<col width="60%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">data_in dtype.name</th>
<th class="head">Return dtype</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>int16</td>
<td>&#8216;complex64&#8217;</td>
</tr>
<tr><td>float32</td>
<td>&#8216;complex64&#8217;</td>
</tr>
<tr><td>int32</td>
<td>&#8216;complex128&#8217;</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.interleave_data">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">interleave_data</tt><big>(</big><em>data_in</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.interleave_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Interleave real, imag data</p>
<p>Does not check if resulting dtype is a valid varian dtype</p>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.get_block">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">get_block</tt><big>(</big><em>file</em>, <em>filedic</em>, <em>read_blockhead=False</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.get_block" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a block from file described by filedic dictionary</p>
<p>When read_blockhead is True will read blockheader(s) and returns 
block_dic,trace.  When read_blockhead is False returns trace.</p>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.get_block_ntraces">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">get_block_ntraces</tt><big>(</big><em>file</em>, <em>filedic</em>, <em>read_blockhead=False</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.get_block_ntraces" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a block from file described by filedic dictionary which may have
multiple traces in each data block.</p>
<p>When read_blockhead is True will read blockheader(s) and returns 
block_dic,trace.  When read_blockhead is False returns trace.</p>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.get_nblocks">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">get_nblocks</tt><big>(</big><em>file</em>, <em>filedic</em>, <em>n</em>, <em>read_blockhead=False</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.get_nblocks" title="Permalink to this definition">¶</a></dt>
<dd><p>Read n blocks from file described by filedic dictionary</p>
<p>When read_blockhead is True will read blockheader(s) and returns
block_dic,data.  When read_blockheader is False returns data.</p>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.get_nblocks_ntraces">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">get_nblocks_ntraces</tt><big>(</big><em>file</em>, <em>filedic</em>, <em>n</em>, <em>read_blockhead=False</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.get_nblocks_ntraces" title="Permalink to this definition">¶</a></dt>
<dd><p>Read n blocks from file described by filedic dictionary which may
have multiple traces per block.</p>
<p>When read_blockhead is True will read blockheader(s) and returns
block_dic,data.  When read_blockheader is False returns data.</p>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.get_fileheader">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">get_fileheader</tt><big>(</big><em>file</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.get_fileheader" title="Permalink to this definition">¶</a></dt>
<dd><p>Unpack file header parameters into list.</p>
<p>Reads the 32-byte file header from file and unpacks into a list.  Endiness
is corrected as needed.</p>
<p>Returned list contents:</p>
<table border="1" class="docutils">
<colgroup>
<col width="2%" />
<col width="19%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">N</th>
<th class="head">Variable</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>0</td>
<td>nblocks</td>
<td>data blocks in file</td>
</tr>
<tr><td>1</td>
<td>ntraces</td>
<td>traces per block</td>
</tr>
<tr><td>2</td>
<td>np</td>
<td>elements per trace</td>
</tr>
<tr><td>3</td>
<td>ebytes</td>
<td>bytes per element</td>
</tr>
<tr><td>4</td>
<td>tbytes</td>
<td>bytes per trace</td>
</tr>
<tr><td>5</td>
<td>bbytes</td>
<td>bytes per block</td>
</tr>
<tr><td>6</td>
<td>vers_id</td>
<td>software version, file_id status bits</td>
</tr>
<tr><td>7</td>
<td>status</td>
<td>status of whole file</td>
</tr>
<tr><td>8</td>
<td>nbheaders</td>
<td>number of block headers per block (1)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.get_blockheader">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">get_blockheader</tt><big>(</big><em>file</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.get_blockheader" title="Permalink to this definition">¶</a></dt>
<dd><p>Unpack block header parameters into a list.</p>
<p>Reads the 28-byte block header from file and unpacks into a list.  Endiness
is corrected as needed.</p>
<p>Returned list contents:</p>
<table border="1" class="docutils">
<colgroup>
<col width="3%" />
<col width="24%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">N</th>
<th class="head">Variable</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>0</td>
<td>scale</td>
<td>scaling factor</td>
</tr>
<tr><td>1</td>
<td>status</td>
<td>status of data in block</td>
</tr>
<tr><td>2</td>
<td>index</td>
<td>block index</td>
</tr>
<tr><td>3</td>
<td>mode</td>
<td>block mode</td>
</tr>
<tr><td>4</td>
<td>ctcount</td>
<td>ct value of FID</td>
</tr>
<tr><td>5</td>
<td>lpval</td>
<td>left phase</td>
</tr>
<tr><td>6</td>
<td>rpval</td>
<td>right phase</td>
</tr>
<tr><td>7</td>
<td>lvl</td>
<td>level drift correction</td>
</tr>
<tr><td>8</td>
<td>tlt</td>
<td>tilt drift correction</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.get_hyperheader">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">get_hyperheader</tt><big>(</big><em>file</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.get_hyperheader" title="Permalink to this definition">¶</a></dt>
<dd><p>Unpack hypercomplex header parameters to a list.</p>
<p>Reads the 28-bytes block header from file and unpacks into a list. Endiness
is corrected as needed.</p>
<p>Returned list contents:</p>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="32%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">N</th>
<th class="head">Variable</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>0</td>
<td>s_spare1</td>
<td>Not Used</td>
</tr>
<tr><td>1</td>
<td>status</td>
<td>status of block</td>
</tr>
<tr><td>2</td>
<td>s_spare2</td>
<td>Not Used</td>
</tr>
<tr><td>3</td>
<td>s_spart3</td>
<td>Not Used</td>
</tr>
<tr><td>4</td>
<td>l_spare1</td>
<td>Not Used</td>
</tr>
<tr><td>5</td>
<td>lpval1</td>
<td>2D left phase</td>
</tr>
<tr><td>6</td>
<td>rpval1</td>
<td>2D right phase</td>
</tr>
<tr><td>7</td>
<td>f_spare1</td>
<td>Not Used</td>
</tr>
<tr><td>8</td>
<td>f_spare2</td>
<td>Not Used</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.get_trace">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">get_trace</tt><big>(</big><em>file</em>, <em>num_points</em>, <em>dt</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.get_trace" title="Permalink to this definition">¶</a></dt>
<dd><p>Read trace of num_points of dtype dt from file</p>
<p>Does not correct Endiness as dt should handle this</p>
<p>dt should be:</p>
<ul class="simple">
<li>np.dtype(&#8216;&gt;f4&#8217;) when S_FLOAT == 1</li>
<li>np.dtype(&#8216;&gt;i2&#8217;) when S_32 != 1 and S_FLOAT == 0</li>
<li>np.dtype(&#8216;&gt;i4&#8217;) when S_32 == 1 and S_FLOAT == 0</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.skip_blockheader">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">skip_blockheader</tt><big>(</big><em>file</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.skip_blockheader" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a block header but do not unpack</p>
<p>This is a replacement for get_blockheader.  It skips file ahead 28 bytes.</p>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.put_block">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">put_block</tt><big>(</big><em>file</em>, <em>dic</em>, <em>trace</em>, <em>bh</em>, <em>hh=False</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.put_block" title="Permalink to this definition">¶</a></dt>
<dd><p>Put blockheader(s) and trace to file</p>
<p>Parameters:</p>
<ul class="simple">
<li>file  file object</li>
<li>dic   fileheader dictionary</li>
<li>trace trace to write to block</li>
<li>bh    blockheader list</li>
<li>hh    hyperheader list (if required)</li>
</ul>
<p>When dic[&#8220;nblocks&#8221;] &gt; 2 additional blocks are written as all zeros.</p>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.put_nblocks">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">put_nblocks</tt><big>(</big><em>file</em>, <em>dic</em>, <em>n</em>, <em>data</em>, <em>bh</em>, <em>hh=False</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.put_nblocks" title="Permalink to this definition">¶</a></dt>
<dd><p>Put nblocks to file</p>
<p>Parameters:</p>
<ul class="simple">
<li>file  file object.</li>
<li>dic   fileheader dictionary.</li>
<li>n     number of blocks to write.</li>
<li>data  sliceable object which returns traces.</li>
<li>bh    first blockheader list.</li>
<li>hh    hyperheader list (if required).</li>
</ul>
<p>The index in the blockheader will be automatically incremeted.</p>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.put_fileheader">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">put_fileheader</tt><big>(</big><em>file</em>, <em>fh</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.put_fileheader" title="Permalink to this definition">¶</a></dt>
<dd><p>Write fileheader list to file (32-bytes written)</p>
<p>Parameters:</p>
<ul class="simple">
<li>file  file object</li>
<li>fh    fileheader list (length 9)</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.put_blockheader">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">put_blockheader</tt><big>(</big><em>file</em>, <em>bh</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.put_blockheader" title="Permalink to this definition">¶</a></dt>
<dd><p>Write blockheader list to file (28-bytes written)</p>
<p>Parameters:</p>
<ul class="simple">
<li>file  file object</li>
<li>bh    blockheaders list, length 9</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.put_hyperheader">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">put_hyperheader</tt><big>(</big><em>file</em>, <em>hh</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.put_hyperheader" title="Permalink to this definition">¶</a></dt>
<dd><p>Write hyperheader list to file (28-bytes written)</p>
<p>Parameters:</p>
<ul class="simple">
<li>file  file object</li>
<li>hh    hyperheader list, length 9</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.put_trace">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">put_trace</tt><big>(</big><em>file</em>, <em>trace</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.put_trace" title="Permalink to this definition">¶</a></dt>
<dd>Write trace to file</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.hyperheader2dic">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">hyperheader2dic</tt><big>(</big><em>head</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.hyperheader2dic" title="Permalink to this definition">¶</a></dt>
<dd>Convert a hypercomplex block header into a python dictionary.</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.blockheader2dic">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">blockheader2dic</tt><big>(</big><em>head</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.blockheader2dic" title="Permalink to this definition">¶</a></dt>
<dd>Convert a block header list into a python dictionary.</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.fileheader2dic">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">fileheader2dic</tt><big>(</big><em>head</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.fileheader2dic" title="Permalink to this definition">¶</a></dt>
<dd>Convert fileheader list into a python dictionary</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.dic2hyperheader">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">dic2hyperheader</tt><big>(</big><em>head</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.dic2hyperheader" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a python dictionary into a hypercomplex block header list.</p>
<p>Does not repack status from bit flags.</p>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.dic2blockheader">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">dic2blockheader</tt><big>(</big><em>dic</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.dic2blockheader" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a python dictionary into block header list.</p>
<p>Does not repack status and mode from bit flags.</p>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.dic2fileheader">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">dic2fileheader</tt><big>(</big><em>dic</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.dic2fileheader" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a python dictionary into a fileheader list</p>
<p>Does not repack status from bit flags</p>
</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.repack_hyperheader">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">repack_hyperheader</tt><big>(</big><em>dic</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.repack_hyperheader" title="Permalink to this definition">¶</a></dt>
<dd>Repack hyperheader dictionary bit flag parameters into status.</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.repack_blockheader">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">repack_blockheader</tt><big>(</big><em>dic</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.repack_blockheader" title="Permalink to this definition">¶</a></dt>
<dd>Repack blockheader dic bit flag parameters into status and mode.</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.repack_fileheader">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">repack_fileheader</tt><big>(</big><em>dic</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.repack_fileheader" title="Permalink to this definition">¶</a></dt>
<dd>Repack blockheader dic bit flag parameters into status and mode.</dd></dl>

<dl class="function">
<dt id="nmrglue.fileio.varian.make_blockheader">
<tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">make_blockheader</tt><big>(</big><em>filedic=False</em>, <em>index=1</em><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.make_blockheader" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a generic blockheader dictionary.</p>
<p>filedic can be provided for status flags, if not provided creates 
header for float32 data</p>
</dd></dl>

</div>
<div class="section" id="low-level-classes">
<h2>Low-Level Classes<a class="headerlink" href="#low-level-classes" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="nmrglue.fileio.varian.fid_2d">
<em class="property">class </em><tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">fid_2d</tt><big>(</big><em>filename</em>, <em>order=</em><span class="optional">[</span>, <em>'y'</em>, <em>'x'</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.fid_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>fid_2d emulates numpy.ndarray object without loading data into memory</p>
<ul class="simple">
<li>slicing operations return ndarray objects.</li>
<li>can iterate over with expected results.</li>
<li>transpose and swapaxes functions create a new fid_2d object with the
new axes ordering.</li>
<li>has ndim, shape, and dtype attributes.</li>
</ul>
</dd></dl>

<dl class="class">
<dt id="nmrglue.fileio.varian.fid_3d">
<em class="property">class </em><tt class="descclassname">nmrglue.fileio.varian.</tt><tt class="descname">fid_3d</tt><big>(</big><em>filename</em>, <em>(lenZ</em>, <em>lenY)</em>, <em>order=</em><span class="optional">[</span>, <em>'z'</em>, <em>'y'</em>, <em>'x'</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#nmrglue.fileio.varian.fid_3d" title="Permalink to this definition">¶</a></dt>
<dd><p>fid_3d emulates numpy.ndarray object without loading data into memory</p>
<ul class="simple">
<li>slicing operations return ndarray objects.</li>
<li>can iterate over with expected results.</li>
<li>transpose and swapaxes functions create a new fid_3d object with the
new axes ordering.</li>
<li>has ndim, shape, and dtype attributes.</li>
</ul>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../modindex.html" title="Global Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="proc_base.html" title="nmrglue.proc_base"
             >next</a> |</li>
        <li class="right" >
          <a href="sparky.html" title="nmrglue.sparky"
             >previous</a> |</li>
        <li><a href="../index.html">nmrglue v1.0 documentation</a> &raquo;</li>
          <li><a href="index.html" >Reference Guide</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2010, Jonathan J. Helmus.
      Last updated on Oct 29, 2010.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.4.
    </div>
  </body>
</html>